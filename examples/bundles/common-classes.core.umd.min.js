!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("common-classes",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self)["common-classes"]={})}(this,(function(t){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,e)};function e(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function r(t,n,e,r){var o,i=arguments.length,u=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(n,e,u):o(n,e))||u);return i>3&&u&&Object.defineProperty(n,e,u),u}var o=Symbol("color-private-context");function i(t,n){return Object.getOwnPropertyDescriptor(t,n)}function u(t,n,e){return Object.defineProperty(t,n,e)}function s(t){return function(t){return Object.getOwnPropertyNames(t)}(t).concat(function(t){return Object.getOwnPropertySymbols(t)}(t))}function c(t){return Object.getPrototypeOf(t)}const l=new Set(["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__proto__"]),a=new Set(["prototype","constructor"]);function f(t){return!function(t){return a.has(t)||l.has(t)}(t)}function h(t,n){return Object.freeze(Array.from(function*(t){const n=s(t);for(let e=0,r=n.length;e<r;e++){const r=n[e];yield[r,i(t,r),t]}}(t)).filter((([t])=>f(t))).map((([t,e])=>{if("function"==typeof e.value)return{propertyKey:t,descriptor:e};throw new TypeError(`${n}: for property '${String(t)}' - only functions are accepted`)})))}const p=c(Object),d=new WeakMap;function y(){return t=>{if("function"!=typeof t)throw new TypeError("@Trait: expects a class");if(d.has(t))throw new Error(`@Trait<${t.name}>: already registered as a trait`);{const n=c(t);if(n!==p&&null!==n&&!d.has(n))throw new Error(`@Trait<${t.name}>: provided trait (class) must extends another trait or nothing`);d.set(t,Object.freeze({trait:t,ownMethods:h(t.prototype,`@Trait<${t.name}>:`),parent:d.get(n)}))}}}const g=new WeakMap;function m(){return t=>{if("function"!=typeof t)throw new TypeError("@Impl: expects a class");if(g.has(t))throw new Error(`@Impl<${t.name}>: already registered as an implementation`);{const n=c(t);if(!d.has(n))throw new Error(`@Impl<${t.name}>: the implementation is not extending a trait`);g.set(t,Object.freeze({implementation:t,ownMethods:h(t.prototype,`@Impl<${t.name}>:`),forTrait:d.get(n)}))}}}function b(t,n,e){const r=n.propertyKey;if(!e.has(r)){if(function(t,n){return n in t}(t,r)&&t[r]!==Object.prototype[r])throw new Error(`The property '${String(r)}' is already defined`);u(t,r,n.descriptor),e.add(r)}}function w(t,n){const e=new Set;!function(t,n,e){const r=n.ownMethods;for(let n=0,o=r.length;n<o;n++)b(t,r[n],e)}(t,n,e),function(t,n,e){for(;void 0!==n;){const r=n.ownMethods;for(let n=0,o=r.length;n<o;n++)b(t,r[n],e);n=n.parent}}(t,n.forTrait,e)}const v=new WeakMap;function x(t,n){!function(t,n){let e;if(v.has(t)?e=v.get(t):(e=new Set,v.set(t,e)),e.has(n))throw new Error("Implementation already applied for this target");w(t,n),e.add(n)}(t,function(t){if(g.has(t))return g.get(t);throw new Error(function(t){return`'${t.name}' is not an implementation. Did you forgot the decorator @Impl() ?`}(t))}(n))}let O=class{};O=r([y()],O);let R=class{};R=r([y()],R);let _=class{};_=r([y()],_);let j=class{};j=r([y()],j);let E=class extends j{toggle(t=!this.isActivated()){return t?this.activate():this.deactivate()}};E=r([y()],E);let G=class{};G=r([y()],G);let A=class{};A=r([y()],A);let B=class{};B=r([y()],B);let S=class{};S=r([y()],S);let M=class{};M=r([y()],M);let P=class{};P=r([y()],P);let T=class extends P{subtract(t){return this.add(t.negate())}};var I;T=r([y()],T),function(t){t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater"}(I||(I={}));let k=class{};k=r([y()],k);let L=class{};L=r([y()],L);let $=class extends L{compare(t){return 0===this.compare(t)}};$=r([y()],$);let C=class{};C=r([y()],C);let H=class extends C{notEquals(t){return!this.equals(t)}};function q(t,n){t.isDispatching()?setImmediate((()=>q(t,n))):n()}function Q(t,n){return new Promise(((e,r)=>{q(t,(()=>{try{e(n())}catch(t){r(t)}}))}))}H=r([y()],H);let D=class{};D=r([y()],D);let N=class extends D{dispatchQueued(t,n){return Q(this,(()=>{this.dispatch(t,n)}))}};function W(t,n){return new Promise(((e,r)=>{t.queue((()=>{try{e(n())}catch(t){r(t)}}))}))}N=r([y()],N);let z=class extends D{dispatchQueued(t,n){return W(this,(()=>{this.dispatch(t,n)}))}};z=r([y()],z);let K=class{};K=r([y()],K);let F=class{};F=r([y()],F);let U=class{};U=r([y()],U);let V=class extends U{onQueued(t,n){return Q(this,(()=>function(t,n,e){let r;const o=t.on(n,(t=>{void 0===r&&e(t)}));return()=>(void 0===r&&(r=Q(t,o)),r)}(this,t,n)))}};V=r([y()],V);let J=class{onQueued(t,n){return W(this,(()=>function(t,n,e){let r;const o=t.on(n,(t=>{void 0===r&&e(t)}));return()=>(void 0===r&&(r=W(t,o)),r)}(this,t,n)))}};J=r([y()],J);let X=class{};X=r([y()],X);let Y=class{};Y=r([y()],Y);let Z=class extends Y{onceQueued(t,n){return Q(this,(()=>function(t,n,e){let r;const o=t.on(n,(t=>{void 0===r&&(i(),e(t))})),i=()=>(void 0===r&&(r=Q(t,o)),r);return i}(this,t,n)))}};Z=r([y()],Z);let tt=class{onceQueued(t,n){return W(this,(()=>function(t,n,e){let r;const o=t.on(n,(t=>{void 0===r&&(i(),e(t))})),i=()=>(void 0===r&&(r=W(t,o)),r);return i}(this,t,n)))}};tt=r([y()],tt);let nt=class{};nt=r([y()],nt);let et=class extends nt{once(t,n){const e=this.on(t,(t=>{e(),n(t)}));return e}};et=r([y()],et);let rt=class{};rt=r([y()],rt);let ot=class{};ot=r([y()],ot);let it=class{};it=r([y()],it);let ut=class{};ut=r([y()],ut);let st=class{};st=r([y()],st);let ct=class{};ct=r([y()],ct);const lt=Symbol("alloc");let at=class{};at=r([y()],at);let ft=class{as(t){return t(this)}};ft=r([y()],ft);let ht=class{};ht=r([y()],ht);let pt=class{};pt=r([y()],pt);let dt=class{};dt=r([y()],dt);let yt=class extends dt{getQueue(){return t=this,new Promise((n=>{t.queue(n)}));var t}};yt=r([y()],yt);let gt=class{};gt=r([y()],gt);var mt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getRed=function(){return this[o].r},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),bt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getAlpha=function(){return this[o].a},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),wt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getBlue=function(){return this[o].b},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),vt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getGreen=function(){return this[o].g},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}());function xt(t,n){if("number"==typeof t){if(0<=t&&t<=1)return t;throw new RangeError("Expected '"+n+"' in the range [0, 1]")}throw new TypeError("Expected number as '"+n+"'")}var Ot=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.setAlpha=function(t){this[o].a=xt(t,"a")},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),Rt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.setBlue=function(t){this[o].b=xt(t,"b")},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),_t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.setGreen=function(t){this[o].g=xt(t,"g")},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),jt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.setRed=function(t){this[o].r=xt(t,"r")},n=r([m()],n)}(function(){function t(){}return t=r([y()],t)}()),Et=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.equals=function(t){return this.getRed()===t.getRed()&&this.getGreen()===t.getGreen()&&this.getBlue()===t.getBlue()&&this.getAlpha()===t.getAlpha()},n=r([y()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([y()],n)}(L))),Gt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toRGB=function(t){return void 0===t&&(t=!1),"rgb"+(t?"a":"")+"("+Math.round(255*this.getRed())+", "+Math.round(255*this.getGreen())+", "+Math.round(255*this.getBlue())+(t?", "+this.getAlpha():"")+")"},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),At=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(){function t(){}return t.prototype.toRGBA=function(){return this.toRGB(!0)},t=r([y()],t)}()),Bt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toHSL=function(t){void 0===t&&(t=!1);var n=this.toHSLAObject();return"hsl"+(t?"a":"")+"("+360*n.h+", "+100*n.s+"%, "+100*n.l+"%"+(t?", "+n.a:"")+")"},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),St=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(){function t(){}return t.prototype.toHSLA=function(){return this.toHSL(!0)},t=r([y()],t)}()),Mt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toHSLAObject=function(){var t=this.getRed(),n=this.getGreen(),e=this.getBlue(),r=this.getAlpha(),o=Math.max(t,n,e),i=Math.min(t,n,e),u={h:0,s:0,l:(o+i)/2,a:r};if(o===i)u.h=0,u.s=0;else{var s=o-i;switch(u.s=u.l>.5?s/(2-o-i):s/(o+i),o){case t:u.h=(n-e)/s+(n<e?6:0);break;case n:u.h=(e-t)/s+2;break;case e:u.h=(t-n)/s+4}u.h/=6}return u},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),Pt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toString=function(){return this.toRGB(!0)},n=r([y()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([y()],n)}(ht)));function Tt(t,n){return void 0===n&&(n=2),t.toString(16).padStart(n,"0")}var It=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toHex=function(t){return void 0===t&&(t=!1),"#"+Tt(Math.round(255*this.getRed()),2)+Tt(Math.round(255*this.getGreen()),2)+Tt(Math.round(255*this.getBlue()),2)+(t?Tt(Math.round(255*this.getAlpha()),2):"")},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),kt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype[lt]=function(t,n,e,r){return new Vt(t,n,e,r)},n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([y()],n)}(at)),Lt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.mix=function(t,n){if(0<=n&&n<=1){var e=1-n;return this[lt](this.getRed()*e+t.getRed()*n,this.getGreen()*e+t.getGreen()*n,this.getBlue()*e+t.getBlue()*n,this.getAlpha()*e+t.getAlpha()*n)}throw new RangeError("Expected 'proportion' in the range [0, 1]")},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),$t=function(){function t(){}return t=r([y()],t)}();function Ct(t,n,e){t=t.trim();var r=parseFloat(t);if(Number.isNaN(r))throw new Error("Invalid number: "+t);if(t.endsWith("%")&&(r*=e/100),n<=r&&r<=e)return r;throw new RangeError("Invalid range ["+n+"-"+e+"] for number "+r)}var Ht="\\s*(\\d+(?:\\.\\d+)?%?)\\s*",qt=new RegExp("rgb(a)?\\("+Ht+","+Ht+","+Ht+"(?:,"+Ht+")?\\)"),Qt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.parseRGB=function(t){qt.lastIndex=0;var n=qt.exec(t);if(null!==n&&typeof n[1]==typeof n[5])return this[lt](Ct(n[2],0,255)/255,Ct(n[3],0,255)/255,Ct(n[4],0,255)/255,void 0===n[5]?1:Ct(n[5],0,1));throw new Error("Invalid rgb(a) color: "+t)},n=r([y()],n)}($t)),Dt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.parse=function(t){var n=document.createElement("div");if(n.style.setProperty("color",t),n.style.getPropertyValue("color")){document.body.appendChild(n);var e=window.getComputedStyle(n).color;return document.body.removeChild(n),this.parseRGB(e)}return null},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),Nt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.grayscale=function(t){var n;switch(void 0===t&&(t="luminosity"),t){case"average":n=(this.getRed()+this.getGreen()+this.getBlue())/3;break;case"lightness":n=(Math.max(this.getRed(),this.getGreen(),this.getBlue())+Math.min(this.getRed(),this.getGreen(),this.getBlue()))/2;break;case"luminosity":n=.21*this.getRed()+.72*this.getGreen()+.07*this.getBlue();break;default:throw new TypeError("Unexpected grayscale's mode: '"+t+"'")}return this[lt](n,n,n,this.getAlpha())},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}()));function Wt(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t}var zt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.fromHSLAObject=function(t){var n,e,r;if(0===t.s)n=e=r=t.l;else{var o=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,i=2*t.l-o;n=Wt(i,o,t.h+1/3),e=Wt(i,o,t.h),r=Wt(i,o,t.h-1/3)}return this[lt](n,e,r,t.a?t.a:1)},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}()));function Kt(t,n,e,r,i){var s,c,l;s=o,c=t,l={r:xt(n,"r"),g:xt(e,"g"),b:xt(r,"b"),a:xt(i,"a")},u(c,s,{configurable:!1,enumerable:!1,writable:!1,value:l})}var Ft=[kt,mt,jt,vt,_t,wt,Rt,bt,Ot,Et,Lt,Nt,function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.invert=function(t){if(void 0===t&&(t=1),0<=t&&t<=1)return this[lt](t*(1-this.getRed())+(1-t)*this.getRed(),t*(1-this.getGreen())+(1-t)*this.getGreen(),t*(1-this.getBlue())+(1-t)*this.getBlue(),this.getAlpha());throw new RangeError("Expected 'amount' in the range [0, 1]")},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.lighten=function(t){var n=this.toHSLAObject();return n.l=Math.max(0,Math.min(1,n.l+t)),this.constructor.fromHSLAObject(n)},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n=r([m()],n)}(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.darken=function(t){return this.lighten(-t)},n=r([y()],n)}(function(){function t(){}return t=r([y()],t)}())),Gt,At,Bt,St,Mt,It,Pt],Ut=[kt,Qt,Dt,zt],Vt=function(t){function n(n,e,r,o){var i=t.call(this)||this;return Kt(i,n,e,r,o),i}return e(n,t),Object.defineProperty(n.prototype,"r",{get:function(){return this.getRed()},set:function(t){this.setRed(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"g",{get:function(){return this.getGreen()},set:function(t){this.setGreen(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"b",{get:function(){return this.getBlue()},set:function(t){this.setBlue(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"a",{get:function(){return this.getAlpha()},set:function(t){this.setAlpha(t)},enumerable:!1,configurable:!0}),n}(function(t,n=[],e){const r=void 0===e?class{}:class extends e{};for(let n=0,e=t.length;n<e;n++)x(r.prototype,t[n]);for(let t=0,e=n.length;t<e;t++)x(r,n[t]);return r}(Ft,Ut));t.Color=Vt,t.ColorConstructorImplementations=Ut,t.ColorImplementations=Ft,t.ConstructColor=Kt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=common-classes.core.umd.min.js.map